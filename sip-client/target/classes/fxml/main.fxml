<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<BorderPane xmlns="http://javafx.com/javafx"
            xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.example.sipclient.gui.controller.MainController"
            prefWidth="900" prefHeight="600">

    <!-- å·¦ä¾§è”ç³»äººåˆ—è¡¨ -->
    <left>
        <VBox style="-fx-background-color: #f0f2f5;" prefWidth="280">
            <!-- æ ‡é¢˜æ å’Œå·¥å…·æ  -->
            <VBox style="-fx-background-color: white; -fx-padding: 15;" spacing="10">
                <HBox alignment="CENTER_LEFT" spacing="10">
                    <Label text="è”ç³»äºº" style="-fx-font-size: 18px; -fx-font-weight: bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="âž•" onAction="#handleAddContact" 
                           style="-fx-background-color: #4caf50; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 5 10;"/>
                    <Button text="âš™" onAction="#handleOpenSettings"
                           style="-fx-background-color: #2196f3; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 5 10;"/>
                    <Button text="ðŸšª" onAction="#handleLogout"
                           style="-fx-background-color: #f44336; -fx-text-fill: white; -fx-font-size: 14px; -fx-padding: 5 10;">
                        <tooltip>
                            <Tooltip text="æ³¨é”€"/>
                        </tooltip>
                    </Button>
                </HBox>
                <!-- æœç´¢æ¡† -->
                <TextField fx:id="searchField" promptText="æœç´¢è”ç³»äººæˆ–æ¶ˆæ¯..."
                          style="-fx-background-color: #f0f2f5; -fx-border-color: transparent; -fx-background-radius: 15; -fx-padding: 8;"/>
            </VBox>
            <Separator/>
            <ListView fx:id="contactListView" VBox.vgrow="ALWAYS"
                     style="-fx-background-color: #f0f2f5; -fx-border-width: 0;"/>
        </VBox>
    </left>

    <!-- ä¸­é—´èŠå¤©åŒºåŸŸ -->
    <center>
        <VBox>
            <!-- èŠå¤©æ ‡é¢˜æ  -->
            <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: white; -fx-padding: 15;">
                <Label fx:id="chatTitleLabel" text="é€‰æ‹©è”ç³»äººå¼€å§‹èŠå¤©"
                       style="-fx-font-size: 16px; -fx-font-weight: bold;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Button text="ðŸ”" onAction="#handleSearchMessage" 
                       style="-fx-background-color: #ff9800; -fx-text-fill: white; -fx-padding: 8 15 8 15; -fx-background-radius: 5;"/>
                <Button fx:id="callButton" text="ðŸ“ž è¯­éŸ³é€šè¯" onAction="#handleMakeCall"
                       style="-fx-background-color: #4CAF50; -fx-text-fill: white; -fx-padding: 8 15 8 15; -fx-background-radius: 5;"/>
            </HBox>
            <Separator/>

            <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
            <ScrollPane fx:id="chatScrollPane" VBox.vgrow="ALWAYS"
                       fitToWidth="true" style="-fx-background-color: #ffffff;">
                <VBox fx:id="chatBox" spacing="10" style="-fx-padding: 20; -fx-background-color: #ffffff;"/>
            </ScrollPane>

            <!-- è¾“å…¥åŒºåŸŸ -->
            <VBox style="-fx-background-color: #f5f5f5; -fx-padding: 15;" spacing="10">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <Button text="ðŸ˜€" onAction="#handleShowEmoji"
                           style="-fx-background-color: transparent; -fx-font-size: 20px;"/>
                    <Button text="ðŸ“Ž" onAction="#handleAttachFile"
                           style="-fx-background-color: transparent; -fx-font-size: 18px;"/>
                </HBox>
                <TextArea fx:id="messageInput" promptText="è¾“å…¥æ¶ˆæ¯... (Shift+Enter æ¢è¡Œ, Enter å‘é€)"
                         wrapText="true" prefRowCount="3"
                         style="-fx-background-color: white; -fx-border-color: #ddd; -fx-border-radius: 5; -fx-background-radius: 5;"/>
                <HBox alignment="CENTER_RIGHT">
                    <Button fx:id="sendButton" text="å‘é€" onAction="#handleSendMessage"
                           prefWidth="100" prefHeight="35"
                           style="-fx-background-color: #0084ff; -fx-text-fill: white; -fx-font-size: 14px; -fx-background-radius: 5;"/>
                </HBox>
            </VBox>
        </VBox>
    </center>

    <!-- åº•éƒ¨çŠ¶æ€æ  -->
    <bottom>
        <HBox style="-fx-background-color: #e8e8e8; -fx-padding: 8 15 8 15;">
            <Label fx:id="statusLabel" text="å°±ç»ª" style="-fx-text-fill: #666;"/>
        </HBox>
    </bottom>
</BorderPane>
